:root{
  --bg:#000; --fg:#fff; --fg-dim:#cfcfcf; --card-max-width:900px;
  --glass: rgba(255,255,255,0.04); --stroke: rgba(255,255,255,0.12);
  --bar-h: 66px; /* bottom bar height */
}
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{
  margin:0; height:100%;
  background:var(--bg); color:var(--fg);
  font-family:system-ui,"Segoe UI","Noto Naskh Arabic","Amiri","Scheherazade New",sans-serif;
  -webkit-user-select:none; user-select:none; -webkit-touch-callout:none;
}

/* Gate */
#gate{position:fixed; inset:0;
  background:radial-gradient(1200px 800px at 50% 40%,#111 0%,#000 60%);
  display:grid; place-items:center; z-index:20; padding-bottom:env(safe-area-inset-bottom);
}
.gate-inner{text-align:center; max-width:28rem; padding:2rem}
.gate-inner h1{margin:0 0 .5rem; font-size:clamp(1.5rem,4vw,2rem)}
.gate-inner p{margin:0 0 1rem; color:var(--fg-dim)}
#startBtn,#saveUserBtn{
  background:#1f1f1f; border:1px solid #333; color:var(--fg);
  padding:.9rem 1.3rem; border-radius:999px; font-weight:700; cursor:pointer
}
.auth{display:flex; gap:.5rem; justify-content:center; margin:.75rem 0 1.25rem}
.auth input{
  background:#0f0f0f; border:1px solid #222; color:#fff; border-radius:10px;
  padding:.7rem 1rem; min-width:12rem
}

/* Minimal topbar (username only) */
#topbar{
  position:fixed; top:0; left:0; right:0; height:36px;
  display:flex; align-items:center; padding:0 .6rem;
  background:linear-gradient(#000a,#0000); z-index:15
}
#whoami{margin-inline-start:auto; color:var(--fg-dim); font-size:.9rem}

/* Drawer */
#drawer{
  position:fixed; inset:0 0 0 auto; width:min(92vw,420px); background:#0a0a0a;
  border-left:1px solid var(--stroke); transform:translateX(100%); transition:transform .25s ease;
  z-index:18; display:flex; flex-direction:column; padding-bottom:env(safe-area-inset-bottom)
}
#drawer.open{transform:translateX(0)}
#scrim{position:fixed; inset:0; background:#0008; backdrop-filter:blur(1px);
  opacity:0; pointer-events:none; transition:.2s; z-index:17}
#scrim.show{opacity:1; pointer-events:auto}
.drawer-head{display:flex; align-items:center; justify-content:space-between; padding:12px; border-bottom:1px solid var(--stroke)}
#surahSearch{margin:12px; border:1px solid #222; background:#0f0f0f; color:#fff; border-radius:8px; padding:.6rem .8rem}
#surahList{list-style:none; margin:0; padding:0; overflow:auto}
#surahList li{
  padding:.9rem 12px; border-bottom:1px solid #111; display:flex; justify-content:space-between; gap:.75rem; cursor:pointer
}
#surahList li:hover{background:#111}
#surahList .en{color:#fff} .ar{color:#aaa}

/* Feed */
#feed{
  height:100svh; /* better on mobile; excludes browser UI */
  overflow-y:auto;
  scroll-snap-type:y mandatory;
  scroll-behavior:smooth;
  overscroll-behavior:contain;
  -webkit-overflow-scrolling:touch;
  padding-top:36px;                 /* top strip */
  padding-bottom:calc(var(--bar-h) + env(safe-area-inset-bottom)); /* space for bottom bar */
}

/* Ayah card */
.ayah{
  position:relative; height:100svh; width:100%;
  scroll-snap-align:start; display:grid; place-items:center; padding:2rem; background:transparent
}
.ayah-inner{
  width:min(95vw,var(--card-max-width)); margin:auto;
  background:var(--glass); border:1px solid var(--stroke);
  backdrop-filter:blur(2px); border-radius:20px; padding:clamp(1rem,4vw,2rem)
}
.text-ar{
  direction:rtl; text-align:center; font-weight:800;
  line-height:1.9; font-size:clamp(1.7rem,5.6vw,3.2rem);
  color:var(--fg); word-break:break-word
}
.meta{ text-align:center; margin-top:.8rem; font-size:clamp(.9rem,2.5vw,1rem); color:var(--fg-dim)}

/* Tajweed tint */
.text-ar tajweed[rule]{font-weight:800}
.text-ar tajweed[rule="ghunna"], .text-ar tajweed[rule="ikhfa"]{color:#72ff7a}
.text-ar tajweed[rule="idgham"], .text-ar tajweed[rule="idgham-without-ghunna"]{color:#66b3ff}
.text-ar tajweed[rule="iqlab"]{color:#ffd166}
.text-ar tajweed[rule="qalqalah"]{color:#ff7a7a}
.text-ar tajweed[rule="madd"]{text-decoration:underline wavy}

/* Mute FAB (raised above bottom bar) */
.fab{
  position:fixed; right:12px; bottom:calc(var(--bar-h) + 10px + env(safe-area-inset-bottom));
  z-index:16; width:56px; height:56px; border-radius:50%;
  background:rgba(255,255,255,0.08); border:1px solid rgba(255,255,255,0.15);
  color:var(--fg); font-size:24px; display:grid; place-items:center; cursor:pointer; user-select:none
}

/* Bottom Nav â€” 5-column grid with moving glow pill */
#bottombar{
  position:fixed; left:0; right:0; bottom:0; height:var(--bar-h);
  display:grid; grid-template-columns: 1fr 1fr auto 1fr 1fr; align-items:center;
  background:#000; border-top:1px solid var(--stroke); z-index:16;
  padding:0 10px; padding-bottom:env(safe-area-inset-bottom);
}

/* MOVING pill (glow behind active tab) */
#pillIndicator{
  position:absolute;
  bottom:calc(8px + env(safe-area-inset-bottom));
  height:40px; width:120px;           /* JS will resize */
  left:0;                              /* keep at 0, we translate instead */
  transform:translateX(var(--pill-x, 0px));
  border-radius:999px;
  background:rgba(255,255,255,0.10);
  border:2px solid rgba(255,255,255,0.65);
  box-shadow:0 0 22px rgba(255,255,255,0.60), 0 0 44px rgba(255,255,255,0.35);
  pointer-events:none; z-index:1;
  transition: transform .24s ease, width .24s ease;
}


/* Tabs on top of pill */
#bottombar .btab{
  position:relative; z-index:2;
  background:transparent; border:0; color:var(--fg); cursor:pointer;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  gap:4px; min-height:48px; min-width:64px; padding:6px 8px;
  font-size:.85rem; line-height:1; -webkit-tap-highlight-color:transparent;
  transition: color .2s ease;
}
#bottombar .btab span{ font-size:.75rem; color:var(--fg-dim) }

/* Slotting */
#bottombar .pos-l1{ grid-column:1 }
#bottombar .pos-l2{ grid-column:2 }
#bottombar .center{ grid-column:3 }
#bottombar .pos-r1{ grid-column:5 }

/* Active state polish (text/icon brighten) */
#bottombar .btab[aria-current="page"]{ color:#fff }
#bottombar .btab[aria-current="page"] span{ color:#fff }
#bottombar .btab[aria-current="page"] svg{ filter: drop-shadow(0 0 4px rgba(255,255,255,0.6)); }

/* Icons */
#bottombar svg{ display:block }


/* Reduce motion */
@media (prefers-reduced-motion: reduce){
  #feed{scroll-behavior:auto}
}

/* Hide scrollbar (keep scrolling functional) */
#feed {
  scrollbar-width: none;       /* Firefox */
}
#feed::-webkit-scrollbar {
  display: none;               /* Chrome, Safari, Edge */
}

